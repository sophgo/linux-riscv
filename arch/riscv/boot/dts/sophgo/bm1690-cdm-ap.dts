// SPDX-License-Identifier: (GPL-2.0 OR MIT)
/*
 * Copyright (C) 2022 Sophgo Technology Inc. All rights reserved.
 */

/dts-v1/;
#include <dt-bindings/interrupt-controller/irq.h>
#include "bm1690-cpu-ap.dtsi"
#include "bm1690-soc-tpu-card.dtsi"

/ {
	/delete-node/ memory@80200000;
};

/ {
	memory@80200000 {
		device_type = "memory";
		reg = <0x00000000 0x80200000 0x00000000 0x1fe00000>;
	};

	uart0: serial@7030000000 {
		compatible = "snps,dw-apb-uart";
		reg = <0x00000070 0x30000000 0x00000000 0x00001000>;
		interrupt-parent = <&intc>;
		interrupts = <41 IRQ_TYPE_LEVEL_HIGH>;
		clock-frequency = <500000000>;
		current-speed = <115200>;
		reg-shift = <2>;
		reg-io-width = <4>;
	};

	vtty0: vtty@bfff0000 {
		compatible = "sophgo,vtty-ap";
		#size-cells = <0x2>;
		#address-cells = <0x2>;
		reg = <0x0 0xbfff1000 0x0 0x1000>,
			<0x0 0xbfff0000 0x0 0x1000>;
		virtaul-msi = <0x69 0x0CD00004 0x1>;
		clr-irq = <0x6e 0x10000028 0x0>;
		interrupt-parent = <&intc>;
		interrupts = <362 IRQ_TYPE_LEVEL_HIGH>;
	};
	vtty1: vtty@bfff2000 {
		compatible = "sophgo,vtty-ap";
		#size-cells = <0x2>;
		#address-cells = <0x2>;
		reg = <0x0 0xbfff3000 0x0 0x1000>,
			<0x0 0xbfff2000 0x0 0x1000>;
		virtaul-msi = <0x69 0x1CD00004 0x1>;
		clr-irq = <0x6e 0x1000002c 0x0>;
		interrupt-parent = <&intc>;
		interrupts = <363 IRQ_TYPE_LEVEL_HIGH>;
	};
	vtty2: vtty@bfff4000 {
		compatible = "sophgo,vtty-ap";
		#size-cells = <0x2>;
		#address-cells = <0x2>;
		reg = <0x0 0xbfff5000 0x0 0x1000>,
			<0x0 0xbfff4000 0x0 0x1000>;
		virtaul-msi = <0x69 0x2CD00004 0x1>;
		clr-irq = <0x6e 0x10000030 0x0>;
		interrupt-parent = <&intc>;
		interrupts = <364 IRQ_TYPE_LEVEL_HIGH>;
	};
	vtty3: vtty@bfff6000 {
		compatible = "sophgo,vtty-ap";
		#size-cells = <0x2>;
		#address-cells = <0x2>;
		reg = <0x0 0xbfff7000 0x0 0x1000>,
			<0x0 0xbfff6000 0x0 0x1000>;
		virtaul-msi = <0x69 0x3CD00004 0x1>;
		clr-irq = <0x6e 0x10000034 0x0>;
		interrupt-parent = <&intc>;
		interrupts = <365 IRQ_TYPE_LEVEL_HIGH>;
	};
	vtty4: vtty@bfff8000 {
		compatible = "sophgo,vtty-ap";
		#size-cells = <0x2>;
		#address-cells = <0x2>;
		reg = <0x0 0xbfff9000 0x0 0x1000>,
			<0x0 0xbfff8000 0x0 0x1000>;
		virtaul-msi = <0x69 0x4CD00004 0x1>;
		clr-irq = <0x6e 0x10000038 0x0>;
		interrupt-parent = <&intc>;
		interrupts = <366 IRQ_TYPE_LEVEL_HIGH>;
	};
	vtty5: vtty@bfffa000 {
		compatible = "sophgo,vtty-ap";
		#size-cells = <0x2>;
		#address-cells = <0x2>;
		reg = <0x0 0xbfffb000 0x0 0x1000>,
			<0x0 0xbfffa000 0x0 0x1000>;
		virtaul-msi = <0x69 0x5CD00004 0x1>;
		clr-irq = <0x6e 0x1000003c 0x0>;
		interrupt-parent = <&intc>;
		interrupts = <367 IRQ_TYPE_LEVEL_HIGH>;
	};
	vtty6: vtty@bfffc000 {
		compatible = "sophgo,vtty-ap";
		#size-cells = <0x2>;
		#address-cells = <0x2>;
		reg = <0x0 0xbfffd000 0x0 0x1000>,
			<0x0 0xbfffc000 0x0 0x1000>;
		virtaul-msi = <0x69 0x6CD00004 0x1>;
		clr-irq = <0x6e 0x10000040 0x0>;
		interrupt-parent = <&intc>;
		interrupts = <368 IRQ_TYPE_LEVEL_HIGH>;
	};
	vtty7: vtty@bfffe000 {
		compatible = "sophgo,vtty-ap";
		#size-cells = <0x2>;
		#address-cells = <0x2>;
		reg = <0x0 0xbffff000 0x0 0x1000>,
			<0x0 0xbfffe000 0x0 0x1000>;
		virtaul-msi = <0x69 0x7CD00004 0x1>;
		clr-irq = <0x6e 0x10000044 0x0>;
		interrupt-parent = <&intc>;
		interrupts = <369 IRQ_TYPE_LEVEL_HIGH>;
	};

	aliases {
		serial0 = &uart0;
		vtty0 = &vtty0;
		vtty1 = &vtty1;
		vtty2 = &vtty2;
		vtty3 = &vtty3;
		vtty4 = &vtty4;
		vtty5 = &vtty5;
		vtty6 = &vtty6;
		vtty7 = &vtty7;
	};

	chosen {
		bootargs = "console=ttyS0,115200 earlycon rdinit=/init root=/dev/ram0 rw initrd=0x8b000000,128M maxcpus=4 no5lvl";
		stdout-path = "serial0";
	};
};
